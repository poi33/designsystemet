import { Meta, Primary, Controls, Canvas, ArgTypes } from '@storybook/addon-docs/blocks';
import { CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/table.css?inline';
import * as TableStories from './Table.stories';

import { TableHeaderCell } from './';

<Meta of={TableStories} />

# Table

`Table` brukes for å vise strukturert informasjon på en ryddig og oversiktlig måte. Tabeller kan gjøre det enklere for brukerne å skanne og sammenligne informasjon.   

<Primary />
<Controls />

## Bruk

```jsx
import { Table } from '@digdir/designsystemet-react';

<Table>
  <caption>Table caption</caption>
  <Table.Head>
    <Table.Row>
      <Table.HeaderCell>Header 1</Table.HeaderCell>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell>Cell 1</Table.Cell>
    </Table.Row>
  </Table.Body>
  <Table.Foot>
    <Table.Row>
      <Table.HeaderCell>Footer 1</Table.HeaderCell>
    </Table.Row>
  </Table.Foot>
</Table>
```

### Tabelltittel

Bruk [`caption`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/caption) til å beskrive en tabell 
på samme måte som vi ville brukt en overskrift. Tabelltittel (`caption`) hjelper brukerne til å finne, navigere og forstå tabeller. Denne plasseres rett etter `Table`-taggen.

```jsx
<Table >
  <caption>Her er tittelen på tabellen</caption>
  ...
</Table>
```

### Celle-overskrifter

Bruk celle-overskrifter (`Table.HeaderCell`) til å fortelle brukerne hva som er innholdet i radene og kolonnene. 
Bruk [scope-atributtet](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/th#scope) for å gjøre det lettere for brukere av skjermlesere å oppfatte sammenhengen mellom overskrifter og data i tabellen.

```jsx
<Table>
  <Table.Head>
    <Table.Row>
      <Table.HeaderCell scope="col">Header 1</Table.HeaderCell>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell>Cell 1</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>
```


## Eksempler
Tabeller kan være enkle med få rader og kolonner, eller de kan ha mye innhold med interaktive komponenter som lenker, knapper, avkryssingsbokser og nedtrekkslister. 

### Med skjemaelementer

Du kan legge inn skjemaelementer i en tabell, men du må håndtere logikken selv.

<Canvas of={TableStories.WithFormElements} />

### Sticky header

Bruk `stickyHeader` hvis du vil at tabellens overskrifter skal forbli synlige når brukeren ruller nedover i tabellen. Dette er nyttig for lange tabeller, slik at brukerne alltid kan se hva som er innholdet i kolonnene.

<Canvas of={TableStories.StickyHeader} />

### Sortering
Du kan bruke props på `Table.HeaderCell` for å vise at tabellen kan sorteres etter innholdet i en kolonne.

- Bruk `sort`-prop'en for å indikere sorteringsretningen:
  - `"none"` – ingen sortering
  - `"ascending"` – stigende rekkefølge
  - `"descending"` – synkende rekkefølge
- Bruk `onClick` for å håndtere hva som skal skje når brukeren klikker på kolonneoverskriften.

Dette gir brukeren visuell tilbakemelding på sorteringsstatus og gjør det mulig å implementere egendefinert sorteringslogikk.


<Canvas of={TableStories.Sortable} />

### Fast kolonnebredde
Du kan bruke `table-layout: fixed` for å hindre at kolonnebreddene endrer seg når innholdet i tabellen oppdateres. Dette gir jevnere layout, og hjelper nettleseren med å tegne tabellen raskere.

Det er spesielt nyttig i tabeller med paginering eller annen dynamisk oppdatering av innhold, der stabil kolonnebredde gir bedre brukeropplevelse.


<Canvas of={TableStories.FixedTable} />

### Med border
Bruk `border` for å legge til en synlig kant rundt tabellen. Dette kan hjelpe brukerne med å skille tabellen fra annet innhold på siden, og gir en mer strukturert visning av dataene.

<Canvas of={TableStories.WithBorder} />

### Tall i en tabell

Når det er tall i en tabell som skal sammenlignes, plasser tallene til høyre i tabellfeltet. 

<Canvas of={TableStories.Numbers} />

### Retningslinjer

Bruk `Table` når du skal organisere og vise data strukturert i rader og kolonner.

- Innhold i tabeller bør være venstrejustert, med unntak av tall, som bør høyrejusteres for å gjøre det lettere å sammenligne tallverdier.
- Bruk `<Table.HeaderCell>` i overskriftceller, ikke `<Table.Cell>`. En celle regnes som en overskrift dersom den beskriver innholdet i samme rad eller kolonne.
- For å spare plass i tabellrader med flere handlinger, kan du bruke en meny dersom handlingene ikke må være synlige hele tiden.


**Passer til å**
- gjøre det enkelt for brukerne å sammenligne og skanne informasjon
- strukturere og vise data effektivt i rader og kolonner
- presentere oversikter med tall eller annen informasjon som kan sorteres

**Passer ikke til å**
- lage layout eller strukturere innholdet på en side visuelt
- presentere informasjon som egner seg bedre i liste- eller kortform
- vise bare én kolonne eller svært få datapunkter uten behov for sammenligning
- vise store datamengder på mobil, der tabellen blir vanskelig å lese


## Tekst 
Unngå lange tekster i tabellceller. Hold innholdet kort og konsist, slik at det er lett å skanne på tvers av rader og kolonner. Hvis du trenger å vise mer informasjon, kan du vurdere å lenke til en detaljside. Bruk overskrifter til å fortelle brukerne hva slags innhold de finner i radene og kolonnene.

Som hovedregel skal innhold i celler være venstrejustert, slik at det blir lettere å lese og skanne informasjon. Unntaket er tall og valuta, og noen ganger skjemaelementer og knapper. For å sikre god lesbarhet på smale skjermer, skal innhold i rader som hovedregel være **toppjustert**. 


## Tilgjengelighet

For å sikre at tabeller fungerer optimalt for alle brukere er det viktig å følge disse retningslinjene:

- **Enkelt celleinnhold:**
  Tabellceller bør ikke slås sammen, og hver celle bør inneholde kun ett interaktivt element. Dette bidrar til at brukerne raskt får oversikt over innholdet og lettere kan sammenligne og skanne informasjonen.
- **Overskrifter:**
  For at brukerne skal kunne navigere i innholdet med skjermleser, er det viktig å bruke rad- og/eller kolonneoverskrifter (`<Table.HeaderCell>`). Bruk `scope="row"` og `scope="col"` for å angi om overskriften gjelder en rad eller kolonne. Hvis det er behov for å spare plass, kan vi visuelt skjule én eller flere overskrifter.
- **Caption-element:**
  Tabeller skal alltid ha et caption-element med kort tekst om hva tabellen viser. Skjermlesere vil lese caption-elementet, og brukerne kan ta stilling til om de vil lese videre i tabellen.
- **Tomme celler:**
  Tomme celler skal være `Table.Cell`. Dette er viktig for å sikre at skjermlesere kan navigere riktig i tabellen.
- **Tastaturnavigering:**
  Sjekk at du kan velge ulik sortering med tastatur. Test med skjermleser at du hører hva som er sorterbart, typer sortering og at du ikke mister fokus når du endrer sortering.
- **Tilpasning for mobil:**
  Det kan være vanskelig å vise tabeller på mobil, siden det ikke finnes et felles design som fungerer i alle sammenhenger. De vanligste alternativene som brukes på mobil er en tabell som ruller horisontalt eller omgjøring til listevisning.

## `Table.HeaderCell` Props

<ArgTypes of={TableHeaderCell} />

## CSS Variabler

<CssVariables css={css} />
