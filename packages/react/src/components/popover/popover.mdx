import { Meta, Canvas, Controls, Primary } from '@storybook/addon-docs/blocks';
import { CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/popover.css?inline';
import * as PopoverStories from './popover.stories.tsx';

<Meta of={PopoverStories} />

# Popover
`Popover` vises over andre elementer i grensesnittet og er koblet til et spesifikt element. Den brukes til å vise tilleggsinformasjon, interaktive elementer eller korte forklaringer uten å navigere bort fra siden. `Popover` kan brukes som en utvidet løsning når [`Tooltip`](/docs/komponenter-tooltip--docs) ikke strekker til.


<Primary />
<Controls />

## Bruk

```tsx
import { Popover } from '@digdir/designsystemet-react';

// med context
<Popover.TriggerContext>
  <Popover.Trigger>Trigger</Popover.Trigger>
  <Popover>Content</Popover>
</Popover.TriggerContext>

// uten context med egen trigger
<Button popovertarget="my-popover">Trigger</Button>
<Popover id="my-popover">Content</Popover>
```

### React og `popovertarget`
Når du bruker `Popover` uten `Popover.TriggerContext`, kobler du selv sammen utløseren og `Popover`.
Da brukes `popovertarget` i små bokstaver, slik at alle versjoner av React korrekt gjengir attributtet.
Når du bruker `@digdir/designsystemet-react` utvider vi `@types/react-dom` til å akseptere dette.

### Polyfill

`Popover` bruker [popover (mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Global_attributes/popover). Dette apiet er klassifisert som [Baseline: Newly available (mozilla.org)](https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility) fra april 2024, da Firefox som siste nettleser la det til. I noen tilfeller kan en oppleve at brukere av ulike grunner er låst til eldre nettleserversjoner, og da kan det være aktuelt å legge til en [Popover-Polyfill (github.com)](https://github.com/oddbird/popover-polyfill) for å sikre at `Popover` fungerer for alle.

## Kodeeksempler
### Interaktive elementer i en popover

Bruk `popover` for å inkludere interaksjoner som knapper eller lenker. Et typisk brukstilfelle er å be brukeren bekrefte en handling, som sletting av en rad i en tabell.

<Canvas of={PopoverStories.Interactive} />

### Tilleggsinformasjon om et ord i en artikkel

Bruk `inline={true}` (stiplet understrek) på `Popover.Trigger` for å indikere at et ord har en forklaring. Popoveren kan inneholde en kort paragraf som utdyper ordets betydning.

<Canvas of={PopoverStories.DottedUnderline} />

### Farger

`Popover` kommer i alle farger, du kan endre den med `data-color`. 
Du kan også sette `variant` direkte for å endre bakgrunnsfarge.

<Canvas of={PopoverStories.Variants} />

### Kontrollert

Dersom du sender inn `open`, så bruker du `popover` kontrollert. Du kan bruke `onClose` for å få beskjed når `popover` vil lukkes.
Dette er nyttig dersom du har innhold som skal lukke `popover` når du klikker på det.

<Canvas of={PopoverStories.Controlled} />

## Retningslinjer
`Popover` brukes for å vise mer detaljert eller interaktiv tilleggsinformasjon uten å ta brukeren bort fra konteksten. Den åpnes ved et bevisst brukerklikk og kan inneholde både tekst, lenker og enkle skjemaelementer. Innholdet bør være kort og relevant, og ikke kritisk for å fullføre oppgaven.

**Passer til:** 
* Utfyllende forklaringer som krever mer plass enn en kort [`Tooltip`](/docs/komponenter-tooltip--docs), f.eks. definisjoner eller utdypende instruksjoner.
* Kontekstspesifikk hjelp som brukeren kan velge å åpne/lukke uten å forlate siden.
* Visning av tilleggsinformasjon som ikke er kritisk for å fullføre oppgaven, men som kan være nyttig for enkelte brukere.

**Passer ikke til:**
* Å beskrive et symbol eller tastatursnartvei, bruk heller [`Tooltip`](/docs/komponenter-tooltip--docs).
* Navigasjon eller valg av alternativer (bruk [`Dropdown`](/docs/komponenter-dropdown--docs) i stedet)
* Å vise innhold ved `hover`.

### Plassering

`Popover` plasseres etter ønske, men holder seg automatisk innenfor det synlige området i nettleseren. Denne oppførselen kan deaktiveres med `autoPlacement`.

## Tekst 
Unngå lange tekster og kompliserte forklaringer. I noen tilfeller er det kanskje bedre å lenke til en annen side med utdypende informasjon om temaet.

## Tilgjengelighet

Det er innebygd tilgjengelighet i [Popover APIet (mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/API/Popover_API) i henhold til åpne/lukket tilstand og tastatur navigasjon.


## CSS Variabler

<CssVariables css={css} />
